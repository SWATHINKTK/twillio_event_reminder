{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SWATHIN/Desktop/Twilio%20Project/frontend/src/lib/getUser.ts"],"sourcesContent":["import { IUser } from \"@/type/user\";\r\n\r\nexport async function getCurrentUser():Promise<IUser | null> {\r\n  try {\r\n    const res = await fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}/user`, {\r\n      method: \"GET\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n\r\n    if (!res.ok) return null;\r\n\r\n    const data = await res.json();\r\n    return data.user;\r\n  } catch (error) {\r\n    console.error(\"Error fetching user:\", error);\r\n    return null;\r\n  }\r\n}"],"names":[],"mappings":";;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,MAAM,MAAM,MAAM,6DAAwC,KAAK,CAAC,EAAE;YACtE,QAAQ;YACR,aAAa;YACb,SAAS;gBACP,gBAAgB;YAClB;QACF;QAEA,IAAI,CAAC,IAAI,EAAE,EAAE,OAAO;QAEpB,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,OAAO,KAAK,IAAI;IAClB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SWATHIN/Desktop/Twilio%20Project/frontend/src/context/AuthContext.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { createContext, useContext, useState, ReactNode, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { IUser } from \"@/type/user\";\r\nimport { getCurrentUser } from \"@/lib/getUser\";\r\n\r\n// Define the shape of the context\r\ninterface AuthContextType {\r\n    user: IUser | null;\r\n    loading: boolean;\r\n    setUser: React.Dispatch<React.SetStateAction<IUser | null>>;\r\n}\r\n\r\n// Create the context with default empty values\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\ninterface AuthProviderProps {\r\n    children: ReactNode;\r\n}\r\n\r\nexport const AuthProvider = ({ children }: AuthProviderProps) => {\r\n    const [user, setUser] = useState<IUser | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        const fetchUser = async () => {\r\n            try {\r\n                setLoading(true);\r\n                const data = await getCurrentUser();\r\n                if (!data) {\r\n                    router.push('/');\r\n                }\r\n                setUser(data);\r\n            } catch (error) {\r\n                console.error(\"Error in AuthProvider:\", error);\r\n                setUser(null);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchUser();\r\n    }, []);\r\n\r\n    return AuthContext.Provider({\r\n        value: { user, loading, setUser },\r\n        children: children\r\n    });\r\n};\r\n\r\n\r\nexport const useAuth = () => {\r\n    const context = useContext(AuthContext);\r\n    if (context === undefined) {\r\n        throw new Error(\"useAuth must be used within an AuthProvider\");\r\n    }\r\n    return context;\r\n};"],"names":[],"mappings":";;;;;;AAEA;AACA;AAEA;AALA;;;;AAcA,+CAA+C;AAC/C,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAMxD,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAqB;IACxD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAe;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACN,MAAM,YAAY;YACd,IAAI;gBACA,WAAW;gBACX,MAAM,OAAO,MAAM,IAAA,uIAAc;gBACjC,IAAI,CAAC,MAAM;oBACP,OAAO,IAAI,CAAC;gBAChB;gBACA,QAAQ;YACZ,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,0BAA0B;gBACxC,QAAQ;YACZ,SAAU;gBACN,WAAW;YACf;QACJ;QAEA;IACJ,GAAG,EAAE;IAEL,OAAO,YAAY,QAAQ,CAAC;QACxB,OAAO;YAAE;YAAM;YAAS;QAAQ;QAChC,UAAU;IACd;AACJ;AAGO,MAAM,UAAU;IACnB,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACvB,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX","debugId":null}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SWATHIN/Desktop/Twilio%20Project/frontend/src/components/UserDetails.tsx"],"sourcesContent":["'use client'; // Enable client-side rendering (state, hooks)\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { FiSave, FiPhone, FiUser, FiArrowLeft, FiCheck } from 'react-icons/fi';\r\nimport { IUser } from '@/type/user';\r\nimport { useAuth } from '@/context/AuthContext';\r\n\r\nexport default function UserDetailsPage() {\r\n    // const router = useRouter();\r\n    const [phoneNumber, setPhoneNumber] = useState('');\r\n    // const [loading, setLoading] = useState(true);\r\n    // const [userData, setUserData] = useState<IUser | null>(null);\r\n    const { user, loading, setUser } = useAuth();\r\n\r\n\r\n    // useEffect(() => {\r\n    //     const checkUserData = async () => {\r\n    //         try {\r\n    //             const res = await fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}/user`, { credentials: 'include' }); // replace with your API route\r\n    //             if (!res.ok) throw new Error('Failed to fetch');\r\n    //             const data = await res.json();\r\n\r\n    //             if (data) {\r\n    //                 setUserData(data?.user);\r\n    //                 setPhoneNumber(data?.user?.phoneNumber || '');\r\n    //             } else {\r\n    //                 router.push('/');\r\n    //             }\r\n    //         } catch (error) {\r\n    //             console.error('Error checking user data:', error);\r\n    //             router.push('/'); // redirect on error\r\n    //         } finally {\r\n    //             setLoading(false);\r\n    //         }\r\n    //     };\r\n\r\n    //     checkUserData();\r\n    // }, [router]);\r\n\r\n    const handleSave = async () => {\r\n        \r\n        const indianPhoneRegex = /^[6-9]\\d{9}$/; // Indian mobile number validation\r\n\r\n        if (!phoneNumber.trim()) {\r\n            alert(\"Phone number cannot be empty\");\r\n            return;\r\n        }\r\n\r\n        if (!indianPhoneRegex.test(phoneNumber)) {\r\n            alert(\"Please enter a valid Indian mobile number\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            alert(phoneNumber);\r\n            const res = await fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}/user/phone`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                credentials: \"include\",\r\n                body: JSON.stringify({ phoneNumber }),\r\n            });\r\n\r\n            if (!res.ok) throw new Error(\"Failed to save phone number\");\r\n\r\n            const data = await res.json();\r\n            if(data.success){\r\n                setUser((prev) => (prev ? { ...prev, phoneNumber } : prev));\r\n            }\r\n            \r\n        } catch (error) {\r\n            console.error(\"Error saving phone number:\", error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 p-4\">\r\n            {/* Header */}\r\n            {/* <div className=\"max-w-2xl mx-auto pt-8 pb-6\">\r\n        <button\r\n          onClick={handleBack}\r\n          className=\"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors duration-200 mb-6 group\"\r\n        >\r\n          <FiArrowLeft className=\"w-5 h-5 group-hover:-translate-x-1 transition-transform duration-200\" />\r\n          <span className=\"font-medium\">Back to Login</span>\r\n        </button>\r\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">User Details</h1>\r\n        <p className=\"text-gray-600\">Complete your profile information</p>\r\n      </div> */}\r\n\r\n            {/* Main Content */}\r\n            <div className=\"max-w-2xl mx-auto\">\r\n                <div className=\"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden\">\r\n                    {/* User Profile Section */}\r\n                    <div className=\"bg-gradient-to-r from-blue-600 to-purple-600 px-8 py-12 text-center relative overflow-hidden\">\r\n                        <div className=\"absolute inset-0 bg-black opacity-10\"></div>\r\n                        <div className=\"relative\">\r\n\r\n                            <h2 className=\"text-2xl font-bold text-white mb-2\">{user?.name}</h2>\r\n                            <p className=\"text-blue-100 text-lg\">{user?.email}</p>\r\n\r\n                            {/* Decorative Elements */}\r\n                            <div className=\"absolute top-4 left-4 w-20 h-20 border-2 border-white/20 rounded-full\"></div>\r\n                            <div className=\"absolute bottom-4 right-4 w-16 h-16 border-2 border-white/20 rounded-full\"></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Form Section */}\r\n                    <div className=\"p-8\">\r\n                        <div className=\"mb-8\">\r\n                            <h3 className=\"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-3\">\r\n                                <FiPhone className=\"w-6 h-6 text-blue-600\" />\r\n                                Contact Information\r\n                            </h3>\r\n\r\n                            {/* Phone Input */}\r\n                            <div className=\"relative\">\r\n                                <label htmlFor=\"phone\" className=\"block text-sm font-medium text-gray-700 mb-3\">\r\n                                    Phone Number\r\n                                </label>\r\n                                <div className=\"relative\">\r\n                                    <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                                        <FiPhone className=\"h-5 w-5 text-gray-400\" />\r\n                                    </div>\r\n                                    <input\r\n                                        type=\"tel\"\r\n                                        id=\"phone\"\r\n                                        value={phoneNumber}\r\n                                        onChange={(e) => setPhoneNumber(e.target.value)}\r\n                                        disabled={!!user?.phoneNumber}\r\n                                        placeholder=\"7888 5556 45\"\r\n                                        className=\"w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-300 text-lg font-medium placeholder-gray-400\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Save Button */}\r\n                        <button\r\n                            onClick={handleSave}\r\n                            disabled={!phoneNumber.trim()}\r\n                            className={`w-full py-4 px-6 rounded-2xl font-semibold text-lg transition-all duration-300 transform ${user?.phoneNumber\r\n                                    ? 'bg-green-500 text-white'\r\n                                    : 'bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 hover:-translate-y-0.5 hover:shadow-lg'\r\n\r\n                                }`}\r\n                        >\r\n                            <div className=\"flex items-center justify-center gap-3\">\r\n                                {user?.phoneNumber ? (\r\n                                    <>\r\n                                        <FiCheck className=\"w-6 h-6\" />\r\n                                        <span>Saved !</span>\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <FiSave className=\"w-6 h-6\" />\r\n                                        <span>Save Details</span>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        </button>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}