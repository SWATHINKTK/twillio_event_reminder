{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SWATHIN/Desktop/Twilio%20Project/frontend/src/components/UserDetails.tsx"],"sourcesContent":["'use client'; // Enable client-side rendering (state, hooks)\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { FiSave, FiPhone, FiCheck } from 'react-icons/fi';\r\nimport { useAuth } from '@/context/AuthContext';\r\n\r\nexport default function UserDetailsPage() {\r\n    const router = useRouter();\r\n    const [phoneNumber, setPhoneNumber] = useState('');\r\n    const { user, setUser } = useAuth();\r\n\r\n    useEffect(() => {\r\n        console.log(\"User Details Page Loaded\", user)\r\n        if (!user) {\r\n            router.push('/');\r\n        }\r\n    }, [router, user])\r\n\r\n    const handleSave = async () => {\r\n        const indianPhoneRegex = /^[6-9]\\d{9}$/; // Indian mobile number validation\r\n\r\n        if (!phoneNumber.trim()) {\r\n            alert(\"Phone number cannot be empty\");\r\n            return;\r\n        }\r\n\r\n        if (!indianPhoneRegex.test(phoneNumber)) {\r\n            alert(\"Please enter a valid Indian mobile number\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const res = await fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}/user/phone`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                credentials: \"include\",\r\n                body: JSON.stringify({ phoneNumber }),\r\n            });\r\n\r\n            if (!res.ok) throw new Error(\"Failed to save phone number\");\r\n\r\n            const data = await res.json();\r\n            if (data.success) {\r\n                setUser((prev) => (prev ? { ...prev, phoneNumber } : prev));\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error(\"Error saving phone number:\", error);\r\n        }\r\n    };\r\n\r\n    const handleLogout = async () => {\r\n        const res = await fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}/user/logout`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n            credentials: \"include\",\r\n        });\r\n\r\n        if (res.ok) {\r\n            setUser(null);\r\n            router.push('/');\r\n        } else {\r\n            console.error(\"Error logging out:\", await res.text());\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 p-4\">\r\n\r\n            {/* Main Content */}\r\n            <div className=\"max-w-2xl mx-auto\">\r\n                <div className=\"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden\">\r\n                    {/* User Profile Section */}\r\n                    <div className=\"bg-gradient-to-r from-blue-600 to-purple-600 px-8 py-12 text-center relative overflow-hidden\">\r\n                        <div className=\"absolute inset-0 bg-black opacity-10\"></div>\r\n                        <div className=\"relative\">\r\n\r\n                            <h2 className=\"text-2xl font-bold text-white mb-2\">{user?.name}</h2>\r\n                            <p className=\"text-blue-100 text-lg\">{user?.email}</p>\r\n\r\n                            {/* Decorative Elements */}\r\n                            <div className=\"absolute top-4 left-4 w-20 h-20 border-2 border-white/20 rounded-full\"></div>\r\n                            <div className=\"absolute bottom-4 right-4 w-16 h-16 border-2 border-white/20 rounded-full\"></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Form Section */}\r\n                    <div className=\"p-8\">\r\n                        <div className=\"mb-8\">\r\n                            <h3 className=\"text-xl font-semibold text-gray-900 mb-6 flex items-center gap-3\">\r\n                                <FiPhone className=\"w-6 h-6 text-blue-600\" />\r\n                                Contact Information\r\n                            </h3>\r\n\r\n                            {/* Phone Input */}\r\n                            <div className=\"relative\">\r\n                                <label htmlFor=\"phone\" className=\"block text-sm font-medium text-gray-700 mb-3\">\r\n                                    Phone Number\r\n                                </label>\r\n                                <div className=\"relative\">\r\n                                    <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                                        <FiPhone className=\"h-5 w-5 text-gray-400\" />\r\n                                    </div>\r\n                                    <input\r\n                                        type=\"tel\"\r\n                                        id=\"phone\"\r\n                                        value={phoneNumber || user?.phoneNumber || ''}\r\n                                        onChange={(e) => setPhoneNumber(e.target.value)}\r\n                                        disabled={!!user?.phoneNumber}\r\n                                        placeholder=\"7888 5556 45\"\r\n                                        className=\"w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-2xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-300 text-lg font-medium placeholder-gray-400\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Save Button */}\r\n                        <button\r\n                            onClick={handleSave}\r\n                            disabled={!!user?.phoneNumber}\r\n                            className={`w-full py-4 px-6 rounded-2xl font-semibold text-lg transition-all duration-300 transform ${user?.phoneNumber\r\n                                ? 'bg-green-500 text-white'\r\n                                : 'bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 hover:-translate-y-0.5 hover:shadow-lg'\r\n\r\n                                }`}\r\n                        >\r\n                            <div className=\"flex items-center justify-center gap-3\">\r\n                                {user?.phoneNumber ? (\r\n                                    <>\r\n                                        <FiCheck className=\"w-6 h-6\" />\r\n                                        <span>Saved !</span>\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <FiSave className=\"w-6 h-6\" />\r\n                                        <span>Save Details</span>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        </button>\r\n                        <button onClick={handleLogout} className=\"mt-4 text-red-600 hover:underline w-full py-4 px-6 rounded-2xl font-semibold\">\r\n                            Logout\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}